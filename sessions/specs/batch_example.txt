#  Batch parameters file
#  =====================
#
#  This file is used to specify the default parameters used by various Qu|Nex commands for
#  HCP minimal preprocessing pipeline, additional bold preprocessing commands,
#  and other analytic functions. The content of this file should be prepended to the list
#  that contains all the sessions that is passed to the commands. It can added manually or
#  automatically when making use of the compileLists Qu|Nex command.
#
#  This template file should be edited to include the parameters relevant for
#  a given study/analysis and provide the appropriate values. For detailed description of
#  parameters and their valid values, please consult the Qu|Nex documentation
*  (e.g. Running HCP minimal preprocessing pipelines, Additional BOLD
#  preprocessing) and online help for the relevant Qu|Nex commands.
#
#
#  File format
#  -----------
#
#  Each parameter is specified in a separate line as a
#  "_<parameter_key>: <parameter_value>" pair. For example:
#
#  _hcp_brainsize:  170
#
#  Empty lines and lines that start with a hash (#) are ignored.
#
#
#  Parameters
#  ==========
#
#  The following is a list of parameters organized by the commands they relate
#  to. To specify parameters, uncomment the line (it should start with the
#  underscore before the parameter name) and provide the desired value. In some
#  cases default values are provided. Do take care to remove the descriptors
#  (... <description>) after the values for the parameters to be used.
#
# # ---- Basic settings
#
# _sessions                 : batch.txt       # ... The file with sessions information.
# _sessionsfolder           :                 # ... The path to study sessions folder.
# _logfolder                :                 # ... The path to log folder.
# _logtag                   :                 # ... An optional additional tag to add to the log file after the command name.
# _overwrite                : no              # ... Whether to overwrite existing results.
# _parsessions              : 1               # ... How many processor sessions to run in parallel.
# _parelements              : 1               # ... How many elements to run in parralel.
# _nprocess                 : 0               # ... How many sessions to process (0 - all).
# _datainfo                 : False           # ... Whether to print information.
# _printoptions             : False           # ... Whether to print options.
# _filter                   :                 # ... Filtering information.
# _script                   : None            # ... The script to be executed.
# _sessionid                :                 # ... a session id for which to run the command
# _sessionids               :                 # ... list of | separated session ids for which to run the command
#
# # ---- Preprocessing options
#
# _bet                      : -f 0.5          # ... options to be passed to BET in brain extraction
# _fast                     : -t 1 -n 3 --nopve # ... options to be passed to FAST in brain segmentation
# _betboldmask              : -R -m           # ... options to be passed to BET when creating bold brain masks
# _TR                       : 2.5             # ... TR of the bold data
# _omit                     : 5               # ... how many frames to omit at the start of each bold run
# _bold_actions             : shrcl           # ... what processing steps to include in bold preprocessing
# _bold_nuisance            : m,V,WM,WB,1d    # ... what regressors to include in nuisance removal
# _bolds                    : all             # ... which bolds to process (can be multiple joind with | )
# _boldname                 : bold            # ... the default name for the bold files
# _bold_prefix              :                 # ... an optional prefix to place in front of processing name extensions in the resulting files
# _img_suffix               :                 # ... an optional suffix for the images folder, to be used when working with multiple parallel workflows
# _pignore                  :                 # ... what to do with frames marked as bad
# _event_file               :                 # ... the root name of the fidl event file for task regression
# _event_string             :                 # ... string specifying what and how of task to regress out
# _source_folder            : True            # ... hould we check for source folder (yes/no)
# _wbmask                   :                 # ... mask specifying what ROI to exclude from WB mask
# _sessionroi               :                 # ... a mask used to specify session specific WB
# _nroi                     :                 # ... additional nuisance regressors ROI and which not to mask by brain mask (e.g. 'nroi.names|eyes,scull')
# _shrinknsroi              : true            # ... whether to shrink signal nuisance ROI (V,WM,WB) true or false
# _path_bold                : bold[N]/*faln_dbnd_xr3d_atl.4dfp.img # ... the mask to use for searching for bold images
# _path_mov                 : movement/*_b[N]_faln_dbnd_xr3d.dat # ... the mask to use for searching for movement files
# _path_t1                  : atlas/*_mpr_n*_111_t88.4dfp.img # ... the mask to use for searching for T1 file
# _image_source             : hcp             # ... what is the target source file format / structure (4dfp, hcp)
# _image_target             : nifti           # ... what is the target file format (4dfp, nifti, dtseries, ptseries)
# _image_atlas              : cifti           # ... what is the target atlas (711, cifti)
# _conc_use                 : relative        # ... how the paths in the .conc file will be used (relative, absolute)
#
# # ---- GLM related options
#
# _glm_matrix               : none            # ... Whether to save GLM regressor matrix in text (text), image (image) or both (both) formats, or not (none).
# _glm_residuals            : save            # ... Whether to save GLM residuals (save) or not (none).
# _glm_name                 :                 # ... Additional name to the residuals and coefficient file to distinguish between different posible models.
#
# # ---- Movement thresholding and report options
#
# _mov_dvars                : 3.0             # ... the dvars threshold to use for identifying bad frames
# _mov_dvarsme              : 1.5             # ... the dvarsme threshold to use for identifying bad frames
# _mov_fd                   : 0.5             # ... frame displacement threshold to use for identifying bad frames
# _mov_radius               : 50.0            # ... the assumed radius of the brain
# _mov_scrub                : yes             # ... whether to output a scrub file when processing motion statistics (not used in the new scrubbing pipeline)
# _mov_fidl                 : udvarsme        # ... which scrub column to use when creating fidl ignore file or none
# _mov_plot                 : mov_report      # ... root name of the plot file, none to omit plotting
# _mov_post                 : udvarsme        # ... which column to use for generating post-scrubbing movement report or none
# _mov_before               : 0               # ... how many frames preceeding bad frames to also exclude
# _mov_after                : 0               # ... how many frames following bad frames to also exclude
# _mov_bad                  : udvarsme        # ... what scrub column to use to mark bad frames (one of mov, dvars, dvarsme, idvars, udvars, idvarsme, udvarsme--see documentation on motion scrubbing)
# _mov_mreport              : movement_report.txt # ... the name of the movement report file
# _mov_preport              : movement_report_post.txt # ... the name of the post scrub movement report file
# _mov_sreport              : movement_scrubbing_report.txt # ... the name of the scrubbing report file
# _mov_pdf                  : movement_plots  # ... the name of the folder that holds movement stats plots
# _mov_pref                 :                 # ... the prefix for the movement report files
#
# # ---- CIFTI related options
#
# _surface_smooth           : 6.0             # ... sigma for cifti surface smoothing
# _volume_smooth            : 6.0             # ... sigma for cifti volume smoothing
# _voxel_smooth             : 2               # ... extent of volume smoothing in voxels
# _smooth_mask              : false           # ... whether to use masked smoothing and what mask to use
# _dilate_mask              : false           # ... whether to use dilation after smoothing and what mask to use
# _hipass_filter            : 0.008           # ... highpass filter to use
# _lopass_filter            : 0.09            # ... lopass filter to use
# _omp_threads              : 0               # ... number of cores to be used in wb_command (0 - don't change system settings)
# _framework_path           :                 # ... the path to framework libraries on mac system
# _wb_command_path          :                 # ... the path to wb_command
# _print_command            : no              # ... whether to print the command run within the preprocessing steps
#
# # ---- scheduler options
#
# _scheduler                : local           # ... the scheduler to use (local|PBS|LSF|SLURM) and any additional settings
# _scheduler_environment    : None            # ... the path to the script setting up the environment to run the commands in
# _scheduler_workdir        : None            # ... the path to working directory from which to run jobs on the cluster
# _scheduler_sleep          : 1               # ... time in seconds between submission of individual scheduler jobs
#
# # --- HCP options
#
# _hcp_processing_mode      : HCPStyleData    # ... Controls whether the HCP acquisition and processing guidelines should be treated as requirements (HCPStyleData) or if additional processing functionality is allowed (LegacyStyleData)
# _hcp_folderstructure      : hcpls           # ... Which version of HCP folder structure to use, initial or hcpls ['hcpls']
# _hcp_freesurfer_home      :                 # ... path to FreeSurfer base folder
# _hcp_freesurfer_module    :                 # ... Whether to load FreeSurfer as a module on the cluster: YES or NONE
# _hcp_Pipeline             :                 # ... path to pipeline base folder
# _hcp_suffix               :                 # ... session id suffix if running HCP preprocessing variants
# _hcp_filename             : standard        # ... How to name the image files in the hcp structure. The default is to name them by their number ('standard') using formula '<hcp_bold_prefix>_[N]' (e.g. BOLD_1), the alternative is to use their actual names ('original') (e.g. rfMRI_REST1_AP). ['standard']
# _hcp_brainsize            : 150             # ... human brain size in mm
# _hcp_t2                   : t2              # ... whether T2 image is present - anything or NONE
# _hcp_fmap                 :                 # ... DEPRECATED!!! whether hi-res structural fieldmap is present - SiemensFieldMap for Siemens Phase/Magnitude pair, or GeneralElectricFieldMap for GE single B0 image, ['']
# _hcp_echodiff             :                 # ... the delta in TE times for the hi-res fieldmap image ['']
# _hcp_sephaseneg           :                 # ... spin echo field map volume with a negative phase encoding direction: (AP, PA, LR, RL) ['']
# _hcp_sephasepos           :                 # ... spin echo field map volume with a positive phase encoding direction: (AP, PA, LR, RL) ['']
# _hcp_seechospacing        :                 # ... Echo Spacing or Dwelltime of Spin Echo Field Map or '' if not used
# _hcp_seunwarpdir          :                 # ... Phase encoding direction of the spin echo field map. (Only applies when using a spin echo field map.) ['']
# _hcp_t1samplespacing      :                 # ... 0.0000074 ... DICOM field (0019,1018) in s or '' if not used
# _hcp_t2samplespacing      :                 # ... 0.0000021 ... DICOM field (0019,1018) in s or '' if not used
# _hcp_unwarpdir            :                 # ... Readout direction of the T1w and T2w images (Used with either a regular field map or a spin echo field map) z appears to be best or '' if not used
# _hcp_gdcoeffs             :                 # ... Location of gradient coefficient file, a string describing mulitiple options, or '' to skip
# _hcp_avgrdcmethod         : NONE            # ... Averaging and readout distortion correction methods: 'NONE' = average any repeats with no readout correction 'FIELDMAP' or 'SiemensFieldMap' or 'GeneralElectricFieldMap' = average any repeats and use field map for readout correction 'TOPUP' = average and distortion correct at the same time with topup/applytopup only works for 2 images currently
# _hcp_topupconfig          :                 # ... A full path to the topup configuration file to use. Set to '' if the default is to be used or of TOPUP distortion correction is not used.
# _hcp_bfsigma              :                 # ... Bias Field Smoothing Sigma (optional)
# _hcp_prefs_check          : last            # ... Whether to check the results of PreFreeSurfer pipeline by last file generated (last), the default list of all files (all) or using a specific check file (path to file) [last]
# _hcp_prefs_custombrain    :                 # ... Whether to use a custom bain mask (MASK) or custom brain images (CUSTOM) in PreFS or not (NONE; the default)
# _hcp_prefs_template_res   : 0.7             # ... The resolution (in mm) of the structural images templates to use in the prefs step.
# _hcp_usejacobian          :                 # ... Not currently in usage (optional)
# _hcp_printcom             :                 # ... Print command for the HCP scripts: set to echo to have commands printed and not executed.
# _hcp_expert_file          :                 # ... Name of the read-in expert options file for FreeSurfer
# _hcp_control_points       :                 # ... Whether to run with manual control points
# _hcp_wm_edits             :                 # ... Whether to run with manually edited WM mask file
# _hcp_autotopofix_off      :                 # ... YES to turn off the automatic topologic fix step in FS and compute WM surface deterministically from manual WM mask (empty)
# _hcp_fs_brainmask         :                 # ... Specify 'original' to keep the masked original brainimage; 'manual' to use the manually edited brainmask file; default 'fs'uses the brainmask generated by mri_watershed [fs].
# _hcp_fs_longitudinal      :                 # ... Is this FreeSurfer run to be based on longitudional data? YES or NO, [NO]
# _hcp_fs_seed              :                 # ... Recon-all seed value. If not specified, none will be used. HCP Pipelines specific!
# _hcp_fs_existing_session  : FALSE           # ... Indicates that the command is to be run on top of an already existing analysis/session. This excludes the `-i` flag from the invocation of recon-all. If set, the user needs to specify which recon-all stages to run using the --hcp_fs_extra_reconall parameter. Accepted values are TRUE or FALSE [FALSE]. HCP Pipelines specific!
# _hcp_fs_extra_reconall    :                 # ... A string with extra parameters to pass to FreeSurfer recon-all. The extra parameters are to be listed in a pipe ('|') separated string. Parameters and their values need to be listed separately. E.g. to pass `-norm3diters 3` to reconall, the string has to be: "-norm3diters|3" []. HCP Pipelines specific!
# _hcp_fs_no_conf2hires     : FALSE           # ... Indicates that (most commonly due to low resolution—1mm or less—of structural image(s), high-resolution steps of recon-all should be excluded. Accepted values are TRUE or FALSE [FALSE]
# _hcp_fs_flair             : FALSE           # ... If set to TRUE indicates that recon-all is to be run with the -FLAIR/-FLAIRpial options(rather than the -T2/-T2pial options). The FLAIR input image itself should still be provided via the '--t2' argument.
# _hcp_fs_check             : last            # ... Whether to check the results of FreeSurfer pipeline by last file generated (last), the default, list of all files (all), or using a specific check file (path to file) [last]
# _hcp_fslong_check         : last            # ... Whether to check the results of FreeSurferLongitudinal pipeline by last file generated (last), the default, list of all files (all), or using a specific check file (path to file) [last]
# _hcp_postfs_check         : last            # ... Whether to check the results of PostFreeSurfer pipeline by last file generated (last), the default, list of all files (all), or using a specific check file (path to file) [last]
# _hcp_grayordinatesres     : 2               # ... Usually 2mm
# _hcp_hiresmesh            : 164             # ... Usually 164 vertices
# _hcp_lowresmesh           : 32              # ... Usually 32 vertices
# _hcp_regname              : MSMSulc         # ... What registration is used FS or MSMSulc. FS if none is provided.
# _hcp_mcsigma              :                 # ... Correction sigma used for metric smooting (sqrt(200): 14.14213562373095048801) [''].
# _hcp_inflatescale         : 1               # ... Inflate extra scale parameter [1].
# _hcp_cifti_tail           :                 # ... The tail of the cifti file to use when mapping data from the HCP MNINonLinear/Results folder.
# _hcp_bold_prefix          : BOLD_           # ... The prefix to use when generating bold names (see 'hcp_bold_name') for bold working folders and results
# _hcp_bold_variant         :                 # ... The suffix to add to 'MNINonLinear/Results' and 'images/functional' folders. '' by default
# _hcp_bold_biascorrection  : NONE            # ... Whether to perform bias correction for BOLD images. NONE, LEGACY or SEBASED (for TOPUP DC only). HCP Pipelines only!
# _hcp_bold_usejacobian     :                 # ... Whether to apply the jacobian of the distortion correction to fMRI data. HCP Pipelines only!
# _hcp_bold_echospacing     :                 # ... Echo Spacing or Dwelltime of fMRI image in seconds
# _hcp_bold_dcmethod        :                 # ... BOLD image deformation correction: TOPUP, FIELDMAP / SiemensFieldMap, GeneralElectricFieldMap or NONE
# _hcp_bold_sephaseneg      :                 # ... Spin echo field map volume to use for BOLD TOPUP with a negative phase encoding direction (AP, PA, LR, RL), ['']
# _hcp_bold_sephasepos      :                 # ... Spin echo field map volume to use for BOLD TOPUP with a positive phase encoding direction (AP, PA, LR, RL), ['']
# _hcp_bold_topupconfig     :                 # ... A full path to the topup configuration file to use. Set to '' if the default is to be used or of TOPUP distortion correction is not used.
# _hcp_bold_dof             :                 # ... Degrees of freedom for EPI-T1 FLIRT. Empty to use HCP default.
# _hcp_bold_sbref           : NONE            # ... Whether BOLD image Reference images should be used - NONE or USE
# _hcp_bold_echodiff        : NONE            # ... Delta TE in ms for BOLD fieldmap images or NONE if not used
# _hcp_bold_unwarpdir       : y               # ... The direction of unwarping, can be specified separately for LR/RL: e.g. 'LR=x|RL=-x|x' or similarly for AP/PA
# _hcp_bold_res             : 2               # ... Target image resolution 2mm recommended
# _hcp_bold_gdcoeffs        : NONE            # ... Gradient distorsion correction coefficients or NONE
# _hcp_bold_doslicetime     :                 # ... Whether to do slice timing correction TRUE or FALSE (default)
# _hcp_bold_slicetimerparams :                 # ... A comma or pipe separated string of parameters for FSL slicetimer.
# _hcp_bold_stcorrdir       :                 # ... The direction of slice acquisition NOTE: deprecated!
# _hcp_bold_stcorrint       :                 # ... Whether slices were acquired in an interleaved fashion (odd) or not (empty) NOTE: deprecated!
# _hcp_bold_movref          : independent     # ... What reference to use for movement correction (independent, first)
# _hcp_bold_seimg           : independent     # ... What image to use for spin-echo distorsion correction (independent, first)
# _hcp_bold_smoothFWHM      : 2               # ... Whether slices were acquired in an interleaved fashion (odd or even) or not (empty)
# _hcp_bold_mask            :                 # ... Specifies what mask to use for the final bold. T1_fMRI_FOV: combined T1w brain mask and fMRI FOV masks (the default), T1_DILATED_fMRI_FOV: a once dilated T1w brain based mask combined with fMRI FOV, T1_DILATED2x_fMRI_FOV: a twice dilated T1w brain based mask combined with fMRI FOV, fMRI_FOV: a fMRI FOV mask.
# _hcp_bold_preregistertool :                 # ... What code to use to preregister BOLDs before FSL BBR epi_reg (default) or flirt
# _hcp_bold_refreg          :                 # ... Whether to use only linaer (default) or also nonlinear registration of motion corrected bold to reference
# _hcp_bold_movreg          : MCFLIRT         # ... Whether to use FLIRT or MCFLIRT for motion correction
# _hcp_bold_vol_check       : last            # ... Whether to check the results of fMRIVolume pipeline by last file generated (last), the default, list of all files (all), or using a specific check file (path to file) [last]
# _hcp_bold_surf_check      : last            # ... Whether to check the results of fMRISurface pipeline by last file generated (last), the default, list of all files (all), or using a specific check file (path to file) [last]
# _hcp_dwi_PEdir            : 1               # ... Use 1 for Left-Right Phase Encoding, 2 for Anterior-Posterior
# _hcp_dwi_gdcoeffs         : NONE            # ... DWI specific gradient distorsion coefficients file or NONE
# _hcp_dwi_echospacing      :                 # ... Echo spacing in msec.
# _hcp_dwi_dof              : 6               # ... Degrees of Freedom for post eddy registration to structural images. Defaults to 6.
# _hcp_dwi_b0maxbval        : 50              # ... Volumes with a bvalue smaller than this value will be considered as b0s. Defaults to 50
# _hcp_dwi_extraeddyarg     :                 # ... A string specifying additional arguments to pass to eddy processing. Defaults to ''
# _hcp_dwi_combinedata      : 1               # ... Specified value is passed as the CombineDataFlag value for the eddy_postproc.sh script. If JAC resampling has been used in eddy, this value determines what to do with the output file: 2 - include in the output all volumes uncombined (i.e. output file of eddy); 1 - include in the output and combine only volumes where both LR/RL (or AP/PA) pairs have been acquired; 0 - As 1, but also include uncombined single volumes. Defaults to 1
# _hcp_dwi_check            : last            # ... Whether to check the results of Diffusion pipeline by last file generated (last), the default, list of all files (all), or using a specific check file (path to file) [last]
#
# # --- Processing options
#
# _run                      : run             # ... run type: run - do the task, test - perform checks
# _log                      : keep            # ... Whether to remove ('remove') the temporary logs once jobs are completed, keep them in the study level processing/logs/comlogs folder ('keep' or 'study') in the hcp folder ('hcp') or in a <session id>/logs/comlogs folder ('sessions'). Multiple options can be specified separated by '|'.
